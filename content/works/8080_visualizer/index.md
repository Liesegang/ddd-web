---
title: "8080 内部ビット可視化シミュレータ – ALU の動きを LED で体感"
date: 2025-07-23T22:35:00+09:00
categories:
  - Works
tags:
  - CPU
  - 8080
  - Education
  - Hardware
  - 8080 Simulator
relatedTags:
  - 8080 Simulator
thumbnailImage: "DSC07110.JPG"
comments: false
showMeta: true
showActions: false
---

## これは何？

{{< img800x src="DSC07110.JPG" alt="デバッグ用リボンケーブルで PC と接続したデモ基板" >}}

**8080  内部ビット可視化シミュレータ** は、インテル 8080 CPU の ALU と主要レジスタを **LED で丸ごと見える化** した学習ボードです。
1  クロックごとに “A レジスタ”“演算結果”“フラグ” などが即座に点灯し、**8 bit CPU が今何をしているか** を手に取るように追えます。

基板サイズは約 100 mm 角。USB 給電のみで動作し、PC から好きなマシン語プログラムを書き込むと、そのままステップ実行が可能です。6  月の **NT 金沢 2025** に出展しました。

## 動機

- 「レジスタやフラグって結局 0/1 になるだけでしょ？」を **LED の点滅** で体験してもらいたい
- 黒い IC の中身を覗けないもどかしさを解消し、**CPU アーキテクチャを“感覚で”覚える教材** に
- 8080 は Z80・8086 系列のルーツ。**8 bit マイコンを学ぶ入口** として最適

## システム構成

| ブロック        | 基板上の表示 | 役割                                                |
| --------------- | ------------ | --------------------------------------------------- |
| ALU             | 8 × LED      | 加算・論理演算結果をリアルタイム表示                |
| Accumulator     | 8 × LED      | A レジスタ内容                                      |
| Register‑Array  | 4 × LED      | B/C/D/E… 汎用レジスタの上位 4 bit                   |
| Flag            | 6 × LED      | S/Z/P/AC/C/– 各フラグ                               |
| Program Counter | 2 × 7seg     | 実行中アドレスを 16 進表示                          |
| ESP32           | –            | PC とのブリッジ（プログラム書き込み・クロック制御） |

> 上記ブロックは PPT のブロック図にほぼ対応しています。
> **基板自体は “表示専用”** で、CPU の演算は ESP32 上で動作する 8080 シミュレータが担当。Verilog で記述した 8080 CPU を C にトランスコンパイルし、ESP32 で実行。出力信号だけを LED に配線しているため、配線は単純で作りやすく、かつ LED は猛烈に賑やかです。

{{< img800x src="diagram.png" alt="8080 CPU シミュレータのシステム構成図とブロック図" >}}

## 使い方デモ

スライドに掲載した 11  ステップのデモプログラムでは、ロード／算術／論理／ローテート／メモリアクセスを一通り実行し、各ビットの遷移を観察できます。

1. `MOV B,AAH` – B  レジスタに AA
2. `MOV A,55H` – A に 55
3. `ADD B` – A=FF
4. `ADI 01H` – A=00, CY=1
5. `ORA B` – A=AA
6. `RAL` – A=55
7. `XRI FFH` – A=AA
8. `ANI 3FH` – A=2A
9. `STA 1000H` – RAM へ保存
10. `ANI 00H` – A=00
11. `LDA 1000H` – RAM から読出し

LED を見ているだけで **キャリーの伝播** や **AND/OR のビットマスク** がわかり、初学者への “なるほど体験” に最適でした。

{{< img800x src="IMG_0517.JPG" alt="展示風景と基板クローズアップ" >}}


## NT 金沢 2025 出展

- **小学生から古のエンジニアまで** 幅広く立ち止まってくれ、「8080 って 50  年前の石でしょ!?」「バス線が光るの最高！」と大盛り上がり
- 「命令追加できますか？」→ Verilog から生成されたソフトウェア実装なので今後のアップデートでほぼ無制限
- 「Z80 版も見たい」→ 次回作候補です

{{< img800x src="DSC07101.JPG" alt="設営直後のブース全景" >}}

### 今後の課題

1. **フル 8080 実装**

   - 現状は ALU と主要レジスタのみ。アドレスバス 16 bit 全 LED 化を検討

2. **マイクロステップ表示**

   - フェッチ／デコード／実行のサブサイクルを色で区別し、より深い観察を実現

3. **教材パッケージ化**

   - 組立キット＋ワークブック＋オンライン IDE を整備し、高校・高専教材へ展開

## おわりに

CPU の内部はブラックボックスと言われがちですが、**1  本 1  本の信号線こそがコンピュータの本質**。
本ボードは「光るだけ」で終わらず、**“見えるから分かる → 分かったら弄りたくなる”** という学びの連鎖を引き起こします。

次は Z80 や 6502 でもっと派手に光らせたい！
